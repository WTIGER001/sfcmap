<h1>Layers</h1>
<small class="form-text text-muted mb-2">Select the data to show on the map. Drag items between groups to move</small>

<div class="scroller scroller-dark">
    <ng-container *ngFor="let g of groups">
        <ng-container *ngIf="g.markers?.length > 0">
            <div class="pack" mwlDraggable [dropData]="g" (dragEnd)="dragging=undefined" mwlDroppable (drop)="drop($event.dropData, g)"
                (dragEnter)="dragging=g" (dragLeave)="dragging=undefined" [class.drop-target]="g==dragging">
                <fa-icon class="pointer" (click)="isCollapsed[g.id] = !isCollapsed[g.id]" [fixedWidth]="true" size="lg" [icon]="isCollapsed[g.id] ? 'caret-right' : 'caret-down'"></fa-icon>
                <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" id="{{g.id}}" [(unchecklist)]="shownGroups" [unchecklistValue]="g.id">
                    <label class="custom-control-label" for="{{g.id}}">{{g.name}}</label>
                </div>
            </div>
            <div [ngbCollapse]="isCollapsed[g.id]" class="ml-5">
                <div mwlDraggable [dropData]="m" (dragEnd)="dragging=undefined" class="custom-control custom-checkbox" *ngFor="let m of g.markers">
                    <input type="checkbox" class="custom-control-input" id="{{m.id}}" [(unchecklist)]="shownMarkers" [unchecklistValue]="m.id">
                    <label class="custom-control-label" for="{{m.id}}"> {{m.name}}</label>
                </div>
            </div>
        </ng-container>
    </ng-container>
    <div class="btn-outline-secondary p-2 center" (click)="manageLayers()">
        <fa-icon icon="trash" size="4x" mwlDroppable (drop)="drop($event.dropData, g)" (dragEnter)="dragging='trash'" (dragLeave)="dragging=undefined"
            [class.drop-target]="dragging=='trash'"></fa-icon>
    </div>

</div>